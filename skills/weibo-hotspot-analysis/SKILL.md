#---
name: weibo-hotspot-analysis
description: "全面分析微博热搜趋势以生成产品创意。该技能通过 API 获取实时微博热搜榜单，利用网络搜索研究每个话题，分析热点详细信息，基于有趣度（80%）和有用度（20%）的评分体系提取产品创意，并生成包含事件脉络、产品创意详情和综合评分的 HTML 报告。适用于用户希望分析微博热搜以获取产品开发灵感或市场趋势分析的场景。"
license: MIT
#---

# 微博热搜产品创意分析技能

## 概述

本技能执行对微博热搜趋势的全面分析，为开发团队生成可落地的产品创意。工作流程包含四个主要阶段：

1.  **API 数据获取**：通过提供的 API 获取实时微博热搜榜单
2.  **话题研究**：对每个热搜话题进行网络搜索，收集背景信息和事件脉络
3.  **产品创意提取**：分析每个热点详细信息，基于有趣度（80%）和有用度（20%）的评分体系生成产品创意
4.  **HTML 报告生成**：创建一个结构化的 HTML 报告，列出所有热点及其事件脉络、产品创意详情和综合评分

## 前置条件

在使用此技能之前，请确保您拥有：
- 有效的微博热搜 API 端点和认证详情（由用户提供）
- 用于收集背景信息的 WebSearch 工具访问权限
- 向本地文件系统写入 HTML 文件的权限

## 详细执行说明

请遵循以下分步说明来执行微博热点分析技能。

### 第一步：获取热搜数据

**选项 A：使用提供的 API**
用户提供了以下 API 详情：
- 接口地址：`https://apis.tianapi.com/weibohot/index?key=6e333e2407e88821ce16a6a8cba513e8`
- 支持协议：http/https
- 请求方法：GET
- 返回格式：UTF-8 JSON

要获取实时微博热搜数据：
1.  使用 Bash 工具配合 `curl` 调用 API 端点：
    ```bash
    curl -s "https://apis.tianapi.com/weibohot/index?key=6e333e2407e88821ce16a6a8cba513e8"
    ```
2.  解析 JSON 响应以提取热搜条目：
    - 检查 `code` 字段是否等于 `200` 表示成功
    - 提取包含热搜条目的 `result.list` 数组
    - 每个条目包含字段：`hotword`（话题标题），`hotwordnum`（热度指标），`hottag`（标签）
    - 根据数组中的位置（索引 + 1）得出 `rank`（排名）
3.  将数据存储为结构化格式以供后续处理

**选项 B：使用示例数据（降级方案）**
如果 API 调用失败或未提供 API 详情，请使用示例数据文件：
1.  读取示例数据文件：`example_data.json`
2.  检查 `code` 字段是否等于 `200` 表示成功
3.  提取包含热搜条目的 `result.list` 数组
4.  每个条目包含字段：`hotword`（话题标题），`hotwordnum`（热度指标），`hottag`（标签）
5.  根据数组中的位置（索引 + 1）得出 `rank`（排名）
6.  使用此数据进行后续分析

**数据结构预期：**
每个热搜条目至少应包含：
- `rank`（数值排名，源自数组索引 + 1）
- `title`（源自 `hotword` 字段的话题标题）
- `hot_value`（源自 `hotwordnum` 字段的热度指标）
- `label`（源自 `hottag` 字段）
注：实际 API 响应不包含 `url` 或 `update_time` 字段。`hotwordnum` 字段可能包含前缀如 "剧集 " 或空格。`hottag` 字段对于无标签的情况可能为空字符串。

### 第二步：使用 WebSearch 研究每个话题

对于每个热搜话题（为效率起见，限制在前 5 个）：

1.  **准备搜索查询**：
    - 使用结合话题标题和上下文词汇的中文搜索词
    - 示例："春节红包大战升级 事件脉络 最新消息 背景"
    - 包含当前年份（2026）以确保相关性

2.  **执行 WebSearch**：
    - 使用准备好的查询调用 WebSearch 工具
    - 设置合适的域名（如 sina.com.cn, sohu.com, baidu.com）
    - 每个话题限制 3-5 个最相关的结果

3.  **提取关键信息**：
    - **事件脉络**：与话题相关的关键事件时间线（**严格要求：只展示在搜索结果中明确提到的时间点，不进行推断**）
    - **背景信息**：上下文和背景细节
    - **关键人物**：涉及的主要个人或机构
    - **争议点**：争议或讨论点
    - **公众反应**：公众情绪和反应
    - **相关趋势**：相关趋势或子话题

4.  **综合摘要**：
    - 创建一个简洁的 150-200 字的热点详细信息摘要
    - 逻辑组织信息，分段清晰
    - 包含搜索结果的引用

### 第三步：生成带评分的产品创意

对于每个热点详细信息，使用以下框架生成 1-2 个产品创意：

**创意结构：**
```
创意名称: [描述性、吸引人的名称]
核心功能:
- 功能 1: [主要功能]
- 功能 2: [次要功能]
- 功能 3: [可选附加功能]
目标用户: [特定用户群体、行为、需求]
```

**评分方法：**

**有趣度 (Interest Score: 0-100):**
- 90-100: 高度娱乐性，病毒式传播潜力，强烈情感共鸣
- 80-89: 有吸引力，易于分享，良好的娱乐价值
- 70-79: 中等有趣，有一定吸引力
- 60-69: 轻微有趣，吸引力有限
- 60 以下: 缺乏娱乐性

**有用度 (Usefulness Score: 0-100):**
- 90-100: 解决真实问题，明确市场需求，高实用性
- 80-89: 满足真实需求，良好的实用价值
- 70-79: 有一定用处，有限的问题解决能力
- 60-69: 边际效用，小众应用
- 60 以下: 几乎没有实用价值

**综合评分计算**: `(有趣度 × 0.8) + (有用度 × 0.2)`

**质量分类：**
- 🟢 **优秀 (Excellent)**: 综合评分 ≥ 80 (在报告中高亮显示)
- 🟡 **良好 (Good)**: 60 ≤ 综合评分 < 80
- 🔴 **需要改进 (Needs Improvement)**: 综合评分 < 60

**理由要求**：对于每个评分，提供 1-2 句话解释为何给予该分数。

### 第四步：生成 HTML 报告

创建一个名为 `weibo_analysis_report.html` 的综合 HTML 报告文件（覆盖旧文件，确保始终是最新版）：

1.  **基本 HTML 结构**：
    ```html
    <!DOCTYPE html>
    <html lang="zh-CN">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>微博热搜产品创意分析报告</title>
        <style>
            /* CSS styles for report formatting */
        </style>
    </head>
    <body>
        <!-- Report content -->
    </body>
    </html>
    ```

2.  **报告章节**：
    - **页眉**：标题、生成时间戳、数据来源
    - **执行摘要**：话题总数、评分分布、表现最佳者
    - **热点分析**：每个话题一个版块，包含：
      - 话题头（排名和标题）
      - 事件脉络（项目符号形式的时间线）
      - 热点详细信息（摘要段落）
      - 产品创意卡片（每个创意在一个样式化的框中）
      - 评分可视化（颜色编码的条形图）
      - 质量徽章
    - **推荐**：综合评分最高的前 3 个创意
    - **方法论**：评分方法的简要说明

3.  **视觉设计**：
    - 使用 CSS grid/flexbox 进行响应式布局
    - 颜色编码：绿色代表优秀，黄色代表良好，红色代表需要改进
    - 评分条显示有趣度 vs 有用度的比例
    - 清晰的排版层级

4.  **文件输出**：
    - 将 HTML 文件保存在当前工作目录
    - 确保中文字符使用正确的 UTF-8 编码
    - 测试在浏览器中打开以验证渲染效果

### 第五步：向用户展示结果

1.  展示分析的简要总结
2.  提供生成的 HTML 文件路径
3.  突出显示排名靠前的创意
4.  如果被请求，提供在浏览器中打开文件的选项

## 输出示例

### 示例产品创意条目

**热点话题**: "春节红包大战升级"

**事件脉络**:
- 2026年1月: 各大平台宣布春节红包活动
- 2026年1月15日: 微信公布"摇一摇红包"新功能
- 2026年1月18日: 支付宝推出AR红包地图
- 2026年1月19日: 微博话题讨论量突破1亿

**热点详细信息**: 今年春节红包竞争异常激烈，各大平台推出创新功能争夺用户注意力。AR技术、社交互动、游戏化元素成为主要竞争点。

**产品创意 1**:
- **名称**: 红包故事生成器
- **核心功能**: 根据用户红包收发记录生成可视化故事，分享社交互动数据
- **目标用户**: 年轻用户群体，喜欢社交分享的千禧一代
- **评分**: 有趣度 85/100, 有用度 70/100, 综合评分 82/100 (优秀)

**产品创意 2**:
- **名称**: 红包理财小助手
- **核心功能**: 将红包收入自动转入理财账户，提供简单投资建议
- **目标用户**: 有理财意识的年轻专业人士
- **评分**: 有趣度 65/100, 有用度 90/100, 综合评分 69/100 (良好)

## Python 脚本（优化版）

为偏好自动化执行的用户提供了一个健壮的 Python 脚本：

**文件**: `skills/weibo-hotspot-analysis/weibo_hotspot_analysis.py`

**特性**:
- **实时数据**: API 集成，支持降级到示例数据
- **真实调研**: 使用 DuckDuckGo Search (或可配置的提供商) 收集实时上下文
- **AI 分析**: 集成 LLM API (兼容 OpenAI) 进行智能创意生成
- **并发处理**: 并行处理以加快执行速度
- **HTML 报告**: 生成专业报告

**配置**:
1. 在 `skills/weibo-hotspot-analysis/` 目录下创建一个 `.env` 文件（参考 `.env.example`）
2. 添加您的 API 密钥：
   ```env
   LLM_API_KEY=your_deepseek_key_here
   TIANAPI_KEY=your_tianapi_key_here
   ```

**用法**:
```bash
cd skills/weibo-hotspot-analysis
pip install -r requirements.txt
python weibo_hotspot_analysis.py
```

## 错误处理

- **API 失败**: 如果 API 请求失败，通知用户并建议替代数据源
- **WebSearch 限制**: 如果搜索结果不足，在报告中注明限制
- **评分一致性**: 保持所有话题评分标准的一致性
- **文件写入问题**: 确保生成 HTML 文件有适当的权限

## 限制

- API 依赖：需要有效的微博 API 访问权限
- 搜索质量：取决于网络搜索结果的相关性
- 主观评分：有趣度和有用度包含主观因素
- 语言重点：主要针对中文内容分析

## 成功指标

- 生成包含所有分析话题的完整 HTML 报告
- 每个话题至少有 1 个带有详细评分的产品创意
- 报告包含优秀创意的视觉高亮
- 为产品开发团队提供清晰的可落地洞察

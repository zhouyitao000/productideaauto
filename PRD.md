# 微博热搜创意分析工具产品需求文档 (PRD)

## 1. 产品概述

### 1.1 背景
在当今快节奏的互联网环境中，紧跟热点趋势是产品创新和营销的关键。微博热搜榜作为中国最活跃的舆论场，蕴含着巨大的市场机会和用户需求。然而，人工监控和分析海量热搜数据不仅耗时耗力，而且难以快速转化为可落地的产品创意。

### 1.2 目标
构建一个自动化的"微博热搜创意分析工具"，旨在通过程序化手段获取实时热搜数据，利用大语言模型（LLM）和网络搜索技术深入分析热点事件，并自动生成具有潜在市场价值的产品创意方案及评分报告。

### 1.3 价值主张
- **自动化**: 全流程自动化，从数据获取到报告生成无需人工干预。
- **实时性**: 基于实时 API 数据，确保创意的时效性。
- **深度分析**: 结合网络搜索，不仅仅是标题党，而是基于事件脉络的深度洞察。
- **量化评估**: 独创的"有趣度"与"有用度"评分模型，辅助决策。

## 2. 用户角色

### 2.1 目标用户
- **产品经理**: 寻找新功能灵感或独立产品方向。
- **市场营销人员**: 策划结合热点的营销活动。
- **独立开发者**: 寻找具有病毒传播潜力的产品创意。
- **内容创作者**: 寻找热门话题的切入角度。

## 3. 功能需求

### 3.1 数据采集模块
- **实时热搜获取**: 
  - 集成天行数据 (TianAPI) 微博热搜接口。
  - 支持获取热搜榜单的排名、标题、热度值和标签。
  - **降级机制**: 当 API 不可用或配置错误时，自动回退到本地示例数据进行演示。
- **并发控制**: 支持配置最大抓取话题数量 (默认为 Top 5) 和并发线程数。

### 3.2 信息处理与分析模块
- **网络搜索增强**:
  - 针对每个热搜话题，自动构建搜索查询词（如"{话题} {年份} 最新消息"）。
  - 集成 DuckDuckGo 搜索引擎，抓取相关的新闻标题和摘要。
  - **Mock 模式**: 在无网络或缺少依赖时，提供模拟搜索结果以保证流程跑通。
- **LLM 智能分析**:
  - 集成 OpenAI 兼容接口（支持 GPT-3.5/4 等模型）。
  - **事件脉络提取**: 从搜索结果中提取关键时间节点和事件摘要。
  - **日期感知**: 系统自动注入当前日期，确保 LLM 对时间线的判断准确性。

### 3.3 创意生成与评分模块
- **创意生成**:
  - 针对每个话题，利用 LLM 生成 2 个具体的产品创意（App、小程序或功能点）。
  - 每个创意包含：名称、核心功能列表、目标用户群体。
- **智能评分**:
  - **有趣度 (Interest Score)**: 评估娱乐性、情感共鸣和传播潜力。
  - **有用度 (Usefulness Score)**: 评估实用性、痛点解决能力和市场需求。
  - **综合评分计算**: `总分 = 有趣度 * 0.8 + 有用度 * 0.2`。
  - **评分理由**: LLM 需输出各项评分的具体理由。

### 3.4 报告生成模块
- **HTML 报告输出**:
  - 生成独立的 `weibo_analysis_report.html` 文件。
  - **统计概览**: 展示分析话题总数、创意分布（优秀/良好/一般）、平均分及最高分。
  - **详细分析卡片**: 
    - 话题信息（排名、标题、热度）。
    - 事件脉络（时间轴展示）。
    - 热点摘要。
  - **创意展示卡片**:
    - 包含质量徽章（优秀/良好/需要改进）。
    - 可视化评分条（有趣度 vs 有用度）。
    - 目标用户和功能列表。
  - **Top 3 推荐**: 自动筛选综合评分最高的 3 个创意进行置顶推荐。

## 4. 评分标准与算法

### 4.1 评分维度
| 维度 | 权重 | 定义 | 评分范围 |
| :--- | :--- | :--- | :--- |
| **有趣度** | 80% | 娱乐性、情感共鸣、社交传播潜力 | 0-100 |
| **有用度** | 20% | 实用性、问题解决能力、市场价值 | 0-100 |

### 4.2 质量分级
系统根据综合评分自动判定创意等级：
- **优秀 (Excellent)**: ≥ 80分 (绿色高亮)
- **良好 (Good)**: 60-79分 (黄色高亮)
- **需要改进 (Needs Improvement)**: < 60分 (红色高亮)

## 5. 技术架构

### 5.1 核心技术栈
- **语言**: Python 3
- **搜索引擎**: `duckduckgo-search`
- **LLM 客户端**: `openai` (Python SDK)
- **并发处理**: `concurrent.futures`
- **环境管理**: `.env` (dotenv)

### 5.2 外部依赖
- **TianAPI**: 用于获取微博热搜榜单数据。
- **LLM Provider**: 提供智能分析能力 (如 OpenAI, DeepSeek, Moonshot 等)。

### 5.3 目录结构
```text
/
├── weibo_hotspot_analysis.py  # 主程序入口
├── config.py                  # 配置管理
├── providers.py               # 搜索与 LLM 接口实现
├── html_template.html         # 报告前端模板
├── example_data.json          # 兜底数据
└── .env                       # 环境变量配置
```

## 6. 非功能需求

### 6.1 可配置性
用户通过 `.env` 文件可灵活配置：
- API Keys (TianAPI, LLM)
- 模型选择 (Model Name)
- 分析话题数量 (MAX_TOPICS)
- 并发数 (CONCURRENCY)

### 6.2 健壮性
- **异常处理**: 网络请求失败、API 额度耗尽或解析错误时，系统不应崩溃，而是记录错误并尝试继续处理下一个话题或使用兜底数据。
- **Mock 支持**: 代码内置 MockSearchProvider 和 MockLLMProvider，方便开发调试和无 Key 演示。

## 7. 后续规划 (Roadmap)
- [ ] 支持更多数据源 (知乎、抖音热榜)。
- [ ] 引入多模态分析 (图片/视频内容理解)。
- [ ] 导出更多格式 (PDF, Markdown)。
- [ ] 增加历史数据趋势分析功能。